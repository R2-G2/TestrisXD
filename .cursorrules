# TestrisXD Project Rules

# Project-specific information
- TestrisXD is a Tetris-like browser game
- Built with HTML, CSS, and JavaScript
- Uses Canvas for rendering game elements
- Classic Tetris scoring system
- Game consists of falling tetromino pieces that need to be arranged to create complete rows
- Features special mirror modes with circle-shaped blocks
- Includes explosion animations and particle effects when lines are cleared
- Demo mode with AI player for automatic gameplay
- Persistent tetromino statistics stored in localStorage
- High score tracking with medals for top performers

# File Structure
- HTML: index.html (main game page)
- CSS: styles.css (all styling)
- JavaScript files in js/ directory:
  - utils.js: Utility functions, drawing helpers, and particle system
  - tetromino.js: Tetromino piece logic
  - board.js: Game board logic 
  - controls.js: User input handling
  - game.js: Main game logic
  - theme.js: Theme settings (light/dark mode)

# Key Components
- Tetromino: A game piece composed of four blocks in different arrangements
- Board: 10x20 grid where the game is played
- Controls: Keyboard and button controls for game interaction
- Game: Main game logic that ties everything together
- Canvas: HTML5 Canvas elements for rendering the game board and next piece
- ParticleSystem: Creates explosion effects when lines are cleared
- Game Over Overlay: Modern UI for game over state with restart option
- LocalStorage: Stores game preferences and tetromino statistics between sessions
- High Scores: Tracks and displays top 10 player scores with medal indicators

# Game Mechanics
- Tetrominoes fall from the top of the board
- Player can move them left/right, rotate them, and speed up their fall
- When a row is completely filled with blocks, it disappears and awards points
- Clearing lines triggers explosion animations with screen shake effects
- Game ends when blocks stack up to the top of the board
- Levels increase as more lines are cleared, increasing game speed
- The game features multiple board views with different mirror modes
- Tetromino statistics are tracked and preserved between game sessions
- Top 10 high scores are saved and displayed at game over
- Score is reset when starting a new game, but tetromino statistics persist

# Visual Effects
- Explosion animations when lines are cleared
- Particle effects that adjust based on number of lines cleared
- Screen shake effect that varies in intensity
- Shape-aware particles (circles or squares based on mirror mode)
- Modern game over overlay instead of alert box
- Score popup animations with color-coding based on event type
- Medal icons (🥇, 🥈, 🥉) for top 3 high scores

# UI Elements and Emoji Usage
- Speed Settings (speed slider values 1-10):
  - 1: 🐌 - Snail (2000ms ± 0-1000ms)
  - 2: 🐢 - Turtle (1750ms ± 0-875ms)
  - 3: 🦥 - Sloth (1500ms ± 0-750ms)
  - 4: 🚶 - Walking person (1250ms ± 0-625ms)
  - 5: 🏃 - Running person (1000ms ± 0-500ms)
  - 6: 🚲 - Bicycle (750ms ± 0-375ms)
  - 7: 🏎️ - Race car (500ms ± 0-250ms)
  - 8: ⚡ - Lightning (375ms ± 0-187ms)
  - 9: 🚀 - Rocket (312ms ± 0-156ms)
  - 10: 💫 - Warp speed (250ms ± 0-125ms)
- Reset Buttons: 🔄 - Used for reset buttons in panels:
  - Reset Options: Resets all game options to default values
  - Reset Statistics: Resets tetromino statistics counters
  - Reset High Scores: Clears saved high scores list
- Score Popups:
  - Soft Drop: Green colored "+1"
  - Hard Drop: Blue colored with dynamic point value
  - Line Clear: Red colored with point value
  - Level Up: Orange colored "+1" (or more), larger text
  - Lines Cleared: Yellow colored with the number of lines cleared
- High Score Medals:
  - 🥇 First place
  - 🥈 Second place
  - 🥉 Third place

# Coding Style
- Use camelCase for variables and functions
- Classes should start with a capital letter
- Include clear, concise comments
- Organize code into logical modules
- Follow modern JavaScript practices 
- Never use console.log statements in production code
- Ensure proper focus management for better keyboard accessibility

# Storage and Persistence
- User preferences should be saved to localStorage when changed
- Preferences include:
  - Dark/light mode setting
  - Board rotation setting
  - Demo mode setting
  - Demo speed setting
- Tetromino statistics are stored in localStorage for persistence between game sessions
- High scores are stored in localStorage with score, level, and lines information
- The top 10 high scores are maintained, sorted from highest to lowest
- Reset buttons should have a clear visual affordance (🔄 emoji) and matching styles

# Keyboard Accessibility
- Elements that can be triggered with spacebar should remove focus after interaction
- Interactive elements should blur after being clicked or activated
- Game keys should not trigger UI elements when focused on game area
- Focus management ensures consistent keyboard controls during gameplay

# Version Control Rules
- Only commit and push changes when explicitly requested
- When committing, include a short summary of the changes
- Keep commits focused on specific features or fixes
- Maintain clean commit history 