<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TestrisXD</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 id="game-title">TestrisXD</h1>
            <div class="score-container">
                <div class="score">Score: <span id="score">0</span></div>
                <div class="level">Level: <span id="level">1</span></div>
                <div class="lines">Lines: <span id="lines">0</span></div>
            </div>
        </div>
        <div class="game-area">
            <div class="side-panel left-panel">
                <div class="panel-section next-piece-section">
                    <h3>Next Piece</h3>
                    <div class="next-piece-grid">
                        <div class="next-piece-display" data-index="0">
                            <!-- Preview 1 (Standard) -->
                        </div>
                        <div class="next-piece-display" data-index="1">
                            <!-- Preview 2 (Horizontal mirror) -->
                        </div>
                        <div class="next-piece-display" data-index="2">
                            <!-- Preview 3 (Vertical mirror) -->
                        </div>
                        <div class="next-piece-display" data-index="3">
                            <!-- Preview 4 (Both mirrors) -->
                        </div>
                    </div>
                </div>
                <div class="panel-section controls-section">
                    <h3>Controls</h3>
                    <ul class="controls-list">
                        <li>↑: Rotate</li>
                        <li>←: Move Left</li>
                        <li>→: Move Right</li>
                        <li>↓: Move Down</li>
                        <li>Space: Hard Drop</li>
                    </ul>
                </div>
            </div>
            <div class="play-area">
                <div class="game-grid">
                    <div class="game-board">
                        <canvas class="game-canvas"></canvas>
                    </div>
                    <div class="game-board">
                        <canvas class="game-canvas"></canvas>
                    </div>
                    <div class="game-board">
                        <canvas class="game-canvas"></canvas>
                    </div>
                    <div class="game-board">
                        <canvas class="game-canvas"></canvas>
                    </div>
                </div>
            </div>
            <div class="side-panel right-panel">
                <div class="panel-section options-section">
                    <h3>Options</h3>
                    <div class="option-item">
                        <label for="theme-toggle">Dark Mode</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="theme-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="option-item">
                        <label for="demo-toggle">Demo Mode</label>
                        <label class="toggle-switch">
                            <input type="checkbox" id="demo-toggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <div class="game-footer">
            <button id="start-button">Start Game</button>
            <button id="pause-button">Pause</button>
            <button id="stop-button">Stop Game</button>
        </div>
    </div>
    <script src="js/utils.js"></script>
    <script src="js/tetromino.js"></script>
    <script src="js/board.js"></script>
    <script src="js/controls.js"></script>
    <script src="js/game.js"></script>
    <script>
        // Handle theme toggle directly in the page
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                // Reset any existing value/state first
                themeToggle.checked = false;
                document.body.classList.remove('dark-mode');
                
                // Direct click handler (simpler approach)
                themeToggle.addEventListener('click', function() {
                    if (this.checked) {
                        document.body.classList.add('dark-mode');
                        console.log('Dark mode enabled');
                    } else {
                        document.body.classList.remove('dark-mode');
                        console.log('Dark mode disabled');
                    }
                });
            }
            
            // Initialize demo toggle - simpler initialization here
            const demoToggle = document.getElementById('demo-toggle');
            if (demoToggle) {
                demoToggle.checked = false;
                
                // Make sure it's initialized properly for the game class
                demoToggle.addEventListener('click', function() {
                    console.log('Demo mode toggled via UI:', this.checked);
                });
            }
        });
    </script>
    <!-- Direct theme toggle initialization -->
    <script>
        // Execute immediately, not waiting for DOMContentLoaded
        (function() {
            setTimeout(function() {
                const toggle = document.getElementById('theme-toggle');
                if (toggle) {
                    console.log('Direct toggle initialization');
                    toggle.onclick = function() {
                        if (this.checked) {
                            document.body.classList.add('dark-mode');
                            console.log('Dark mode ON');
                        } else {
                            document.body.classList.remove('dark-mode');
                            console.log('Dark mode OFF');
                        }
                    };
                }
            }, 500); // Small delay to ensure everything is loaded
        })();
    </script>
</body>
</html> 